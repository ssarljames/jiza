(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BJHQ:function(t,e,r){"use strict";r.r(e);var n=r("H6It"),s=r("Valr"),o=r("4YGV"),a=r("QJY3"),i=r("TYT/"),c=r("CFL1"),l=r("WHFS"),b=r("DUip"),m=r("17Os"),f=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Lb({type:t,selectors:[["app-ellipis-loading"]],decls:9,vars:0,consts:[[1,"app-loading"],[1,"text-center"],[1,"lds-ellipsis"]],template:function(t,e){1&t&&(i.Xb(0,"div",0),i.Xb(1,"div",1),i.Xb(2,"div",2),i.Sb(3,"div"),i.Sb(4,"div"),i.Sb(5,"div"),i.Sb(6,"div"),i.Wb(),i.Sb(7,"br"),i.Sb(8,"br"),i.Wb(),i.Wb())},styles:[".lds-ellipsis[_ngcontent-%COMP%]{display:inline-block;position:relative;width:64px;height:64px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:27px;width:11px;height:11px;border-radius:50%;background:#555;border:1px solid #fff;-webkit-animation-timing-function:cubic-bezier(0,1,1,0);animation-timing-function:cubic-bezier(0,1,1,0)}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{left:6px;-webkit-animation:lds-ellipsis1 .6s infinite;animation:lds-ellipsis1 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:6px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2), .lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation:lds-ellipsis2 .6s infinite;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:26px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:45px;-webkit-animation:lds-ellipsis3 .6s infinite;animation:lds-ellipsis3 .6s infinite}@-webkit-keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@-webkit-keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@-webkit-keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(19px)}}@keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(19px)}}"]}),t}(),u=r("eHTH"),d=r("cSbt"),p=r("DjAo"),h=r("p+mS");function v(t,e){1&t&&(i.Xb(0,"mat-card-content"),i.Sb(1,"app-ellipis-loading"),i.Wb())}function g(t,e){if(1&t&&(i.Xb(0,"div",11),i.Kc(1),i.Wb()),2&t){var r=i.nc(2);i.Db(1),i.Mc(" ",r.error," ")}}function w(t,e){if(1&t){var r=i.Yb();i.Xb(0,"mat-card-content"),i.Ic(1,g,2,1,"div",5),i.Xb(2,"mat-form-field",6),i.Sb(3,"input",7),i.Xb(4,"mat-error"),i.Kc(5),i.Wb(),i.Wb(),i.Xb(6,"mat-form-field",6),i.Sb(7,"input",8),i.Xb(8,"mat-error"),i.Kc(9),i.Wb(),i.Wb(),i.Sb(10,"br"),i.Sb(11,"br"),i.Sb(12,"br"),i.Xb(13,"mat-form-field",6),i.Sb(14,"input",9),i.Xb(15,"mat-error"),i.Kc(16),i.Wb(),i.Wb(),i.Xb(17,"mat-checkbox",10),i.jc("change",(function(t){i.Bc(r);var e=i.nc();return e.resetPassword=!e.resetPassword})),i.Kc(18,"Reset Password to "),i.Xb(19,"strong"),i.Kc(20),i.Wb(),i.Wb(),i.Wb()}if(2&t){var n=i.nc();i.Db(1),i.sc("ngIf",n.error),i.Db(2),i.sc("formControl",n.form.controls.firstname),i.Db(2),i.Lc(n.form.controls.firstname.errors),i.Db(2),i.sc("formControl",n.form.controls.lastname),i.Db(2),i.Lc(n.form.controls.lastname.errors),i.Db(5),i.sc("formControl",n.form.controls.username),i.Db(2),i.Lc(n.form.controls.username.errors),i.Db(1),i.sc("checked",n.resetPassword),i.Db(3),i.Lc(n.randomPassword)}}function W(t,e){1&t&&(i.Xb(0,"mat-card-actions"),i.Xb(1,"button",12),i.Sb(2,"i",13),i.Kc(3," Submit"),i.Wb(),i.Xb(4,"button",14),i.Sb(5,"i",15),i.Kc(6," Cancel"),i.Wb(),i.Wb())}var S=function(){function t(t,e,r,n){this.userService=t,this.modalService=e,this.router=r,this.activatedRoute=n,this.isFetching=!0,this.resetPassword=!1,this.form=new a.e({username:new a.c(""),firstname:new a.c(""),lastname:new a.c("")})}return t.prototype.ngOnInit=function(){var t=this;this.userId=this.activatedRoute.snapshot.params.id,this.isFetching=!0,this.userService.read(this.userId).subscribe((function(e){t.form.setValue({username:e.username,firstname:e.firstname,lastname:e.lastname}),t.isFetching=!1,t.randomizePassword()}))},t.prototype.submit=function(){var t=this;if(this.form.valid){var e=new o.a;e.id=this.userId,e.username=this.form.controls.username.value,e.firstname=this.form.controls.firstname.value,e.lastname=this.form.controls.lastname.value,e.password=this.randomPassword,e.reset_password=this.resetPassword,this.userService.update(e).subscribe((function(e){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["p/users"])}),(function(e){for(var r in e.error.errors)t.form.controls.hasOwnProperty(r)&&t.form.controls[r].setErrors(e.error.errors[r])}))}},t.prototype.randomizePassword=function(){for(var t="",e="0123456789".length,r=0;r<6;r++)t+="0123456789".charAt(Math.floor(Math.random()*e));this.randomPassword=t},t.\u0275fac=function(e){return new(e||t)(i.Rb(c.a),i.Rb(l.a),i.Rb(b.g),i.Rb(b.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["app-edit"]],decls:10,vars:4,consts:[[1,"fa","fa-user-edit"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl"],["matInput","","placeholder","Lastname",3,"formControl"],["matInput","","placeholder","Username",3,"formControl"],["color","primary",3,"checked","change"],[1,"alert","alert-danger"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","p/users"],[1,"fa","fa-times"]],template:function(t,e){1&t&&(i.Xb(0,"h1"),i.Sb(1,"i",0),i.Kc(2," Edit User Account\n"),i.Wb(),i.Xb(3,"form",1),i.jc("submit",(function(t){return e.submit()})),i.Xb(4,"div",2),i.Xb(5,"div",3),i.Xb(6,"mat-card"),i.Ic(7,v,2,0,"mat-card-content",4),i.Ic(8,w,21,9,"mat-card-content",4),i.Ic(9,W,7,0,"mat-card-actions",4),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.Db(3),i.sc("formGroup",e.form),i.Db(4),i.sc("ngIf",e.isFetching),i.Db(1),i.sc("ngIf",0==e.isFetching),i.Db(1),i.sc("ngIf",0==e.isFetching))},directives:[a.s,a.l,a.f,m.a,s.l,m.d,f,u.b,d.a,a.b,a.k,a.d,u.a,p.a,m.b,h.b,b.h],styles:[""]}),t}();function X(t,e){if(1&t&&(i.Xb(0,"div",13),i.Kc(1),i.Wb()),2&t){var r=i.nc();i.Db(1),i.Mc(" ",r.error," ")}}var y=function(){function t(t,e,r){this.userService=t,this.modalService=e,this.router=r,this.form=new a.e({username:new a.c(""),firstname:new a.c(""),lastname:new a.c(""),password:new a.c("")})}return t.prototype.ngOnInit=function(){this.randomizePassword(),this.form.controls.username.disable()},t.prototype.setUsername=function(){var t=this.form.controls.firstname.value,e=this.form.controls.lastname.value;t.trim().length>0&&e.trim().length>0?this.form.controls.username.setValue((t.charAt(0)+"."+e).toLowerCase()):this.form.controls.username.setValue("")},t.prototype.randomizePassword=function(){for(var t="0123456789".length,e=0;e<6;e++)"0123456789".charAt(Math.floor(Math.random()*t));this.form.controls.password.setValue("password")},t.prototype.submit=function(){var t=this;if(this.form.valid){var e=new o.a;e.username=this.form.controls.username.value,e.firstname=this.form.controls.firstname.value,e.lastname=this.form.controls.lastname.value,e.password=this.form.controls.password.value,this.userService.create(e).subscribe((function(e){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["p/users"])}),(function(e){for(var r in e.error.errors)t.form.controls.hasOwnProperty(r)&&("username"==r&&"The username field is required."!=e.error.errors[r]&&t.form.controls.username.enable(),t.form.controls[r].setErrors(e.error.errors[r]))}))}},t.\u0275fac=function(e){return new(e||t)(i.Rb(c.a),i.Rb(l.a),i.Rb(b.g))},t.\u0275cmp=i.Lb({type:t,selectors:[["app-create"]],decls:36,vars:9,consts:[[1,"fa","fa-user-plus"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Lastname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Username",3,"formControl"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","p/users"],[1,"fa","fa-times"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(i.Xb(0,"h1"),i.Sb(1,"i",0),i.Kc(2," Create User Account\n"),i.Wb(),i.Xb(3,"form",1),i.jc("submit",(function(t){return e.submit()})),i.Xb(4,"div",2),i.Xb(5,"div",3),i.Xb(6,"mat-card"),i.Xb(7,"mat-card-content"),i.Ic(8,X,2,1,"div",4),i.Xb(9,"mat-form-field",5),i.Xb(10,"input",6),i.jc("change",(function(t){return e.setUsername()}))("keydown",(function(t){return e.setUsername()}))("keyup",(function(t){return e.setUsername()})),i.Wb(),i.Xb(11,"mat-error"),i.Kc(12),i.Wb(),i.Wb(),i.Xb(13,"mat-form-field",5),i.Xb(14,"input",7),i.jc("change",(function(t){return e.setUsername()}))("keydown",(function(t){return e.setUsername()}))("keyup",(function(t){return e.setUsername()})),i.Wb(),i.Xb(15,"mat-error"),i.Kc(16),i.Wb(),i.Wb(),i.Sb(17,"br"),i.Sb(18,"br"),i.Sb(19,"br"),i.Xb(20,"mat-form-field",5),i.Sb(21,"input",8),i.Xb(22,"mat-error"),i.Kc(23),i.Wb(),i.Wb(),i.Sb(24,"br"),i.Sb(25,"br"),i.Kc(26," Password: "),i.Xb(27,"strong"),i.Kc(28),i.Wb(),i.Wb(),i.Xb(29,"mat-card-actions"),i.Xb(30,"button",9),i.Sb(31,"i",10),i.Kc(32," Submit"),i.Wb(),i.Xb(33,"button",11),i.Sb(34,"i",12),i.Kc(35," Cancel"),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.Db(3),i.sc("formGroup",e.form),i.Db(5),i.sc("ngIf",e.error),i.Db(2),i.sc("formControl",e.form.controls.firstname),i.Db(2),i.Lc(e.form.controls.firstname.errors),i.Db(2),i.sc("formControl",e.form.controls.lastname),i.Db(2),i.Lc(e.form.controls.lastname.errors),i.Db(5),i.sc("formControl",e.form.controls.username),i.Db(2),i.Lc(e.form.controls.username.errors),i.Db(5),i.Lc(e.form.controls.password.value))},directives:[a.s,a.l,a.f,m.a,m.d,s.l,u.b,d.a,a.b,a.k,a.d,u.a,m.b,h.b,b.h],styles:[""]}),t}(),D=r("iPKQ"),C=r("6onV"),I=r("ETwC"),k=r("/RhQ");function P(t,e){if(1&t){var r=i.Yb();i.Xb(0,"mat-form-field"),i.Xb(1,"input",5),i.jc("ngModelChange",(function(t){return i.Bc(r),i.nc().queryParams.q=t}))("keydown.enter",(function(t){return i.Bc(r),i.nc().fetchUsers()})),i.Wb(),i.Xb(2,"button",6),i.Sb(3,"i",7),i.Wb(),i.Wb()}if(2&t){var n=i.nc();i.Db(1),i.sc("ngModel",n.queryParams.q)}}function M(t,e){1&t&&(i.Xb(0,"th",18),i.Kc(1," Username "),i.Wb())}function K(t,e){if(1&t&&(i.Xb(0,"td",19),i.Sb(1,"i",20),i.Kc(2),i.Wb()),2&t){var r=e.$implicit;i.Db(2),i.Mc(" ",r.username," ")}}function L(t,e){1&t&&(i.Xb(0,"th",18),i.Kc(1," Firstname "),i.Wb())}function U(t,e){if(1&t&&(i.Xb(0,"td",19),i.Kc(1),i.oc(2,"titlecase"),i.Wb()),2&t){var r=e.$implicit;i.Db(1),i.Mc(" ",i.pc(2,1,r.firstname)," ")}}function O(t,e){1&t&&(i.Xb(0,"th",18),i.Kc(1," Lastname "),i.Wb())}function _(t,e){if(1&t&&(i.Xb(0,"td",19),i.Kc(1),i.oc(2,"titlecase"),i.Wb()),2&t){var r=e.$implicit;i.Db(1),i.Mc(" ",i.pc(2,1,r.lastname)," ")}}function R(t,e){1&t&&(i.Xb(0,"th",18),i.Kc(1," Created "),i.Wb())}function x(t,e){if(1&t&&(i.Xb(0,"td",19),i.Kc(1),i.oc(2,"titlecase"),i.oc(3,"dfnsDistanceInWordsToNow"),i.oc(4,"parseDate"),i.Wb()),2&t){var r=e.$implicit;i.Db(1),i.Mc(" ",i.pc(2,1,i.pc(3,3,i.pc(4,5,r.created_at)))," ago")}}function F(t,e){1&t&&(i.Xb(0,"th",18),i.Kc(1," Actions "),i.Wb())}function A(t,e){if(1&t&&(i.Xb(0,"td",19),i.Xb(1,"button",21),i.Sb(2,"i",22),i.Wb(),i.Wb()),2&t){var r=e.$implicit;i.Db(1),i.sc("routerLink","/p/users/"+r.id+"/edit")}}function V(t,e){1&t&&i.Sb(0,"tr",23)}function j(t,e){1&t&&i.Sb(0,"tr",24)}function q(t,e){if(1&t&&(i.Xb(0,"table",8),i.Vb(1,9),i.Ic(2,M,2,0,"th",10),i.Ic(3,K,3,1,"td",11),i.Ub(),i.Vb(4,12),i.Ic(5,L,2,0,"th",10),i.Ic(6,U,3,3,"td",11),i.Ub(),i.Vb(7,13),i.Ic(8,O,2,0,"th",10),i.Ic(9,_,3,3,"td",11),i.Ub(),i.Vb(10,14),i.Ic(11,R,2,0,"th",10),i.Ic(12,x,5,7,"td",11),i.Ub(),i.Vb(13,15),i.Ic(14,F,2,0,"th",10),i.Ic(15,A,3,1,"td",11),i.Ub(),i.Ic(16,V,1,0,"tr",16),i.Ic(17,j,1,0,"tr",17),i.Wb()),2&t){var r=i.nc();i.sc("dataSource",r.users),i.Db(16),i.sc("matHeaderRowDef",r.displayedColumns),i.Db(1),i.sc("matRowDefColumns",r.displayedColumns)}}function H(t,e){1&t&&i.Sb(0,"app-ellipis-loading")}var z=function(){function t(t,e,r){var n=this;this.userService=t,this.authService=e,this.store=r,this.displayedColumns=["username","firstname","lastname","created_at","actions"],this.users=[],this.queryParams={q:"",page:1},this.meta={},this.d=new Date,this.isLoading=!1,e.user$.subscribe((function(t){n.user=t})),this.store.select("users").subscribe((function(t){n.users=t}))}return t.prototype.ngOnInit=function(){this.fetchUsers()},t.prototype.fetchUsers=function(){var t=this;this.isLoading=!0,this.userService.query({params:this.queryParams}).subscribe((function(e){t.meta=t.userService.getMeta(),t.isLoading=!1}))},t.prototype.makeid=function(t){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,s=0;s<t;s++)e+=r.charAt(Math.floor(Math.random()*n));return e},t.\u0275fac=function(e){return new(e||t)(i.Rb(c.a),i.Rb(D.a),i.Rb(C.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["app-index"]],decls:14,vars:3,consts:[[1,"fa","fa-users"],["mat-raised-button","","color","primary","routerLink","/p/users/create","rou",""],[4,"ngIf"],[1,"table-responsive"],["mat-table","","class","mat-elevation-28",3,"dataSource",4,"ngIf"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear"],[1,"fa","fa-search"],["mat-table","",1,"mat-elevation-28",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","created_at"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"fa","fa-user-circle"],["mat-raised-button","","color","basic",3,"routerLink"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(i.Xb(0,"h1"),i.Sb(1,"i",0),i.Kc(2," Users "),i.Xb(3,"a",1),i.Kc(4,"New"),i.Wb(),i.Wb(),i.Xb(5,"mat-card"),i.Xb(6,"mat-card-header"),i.Ic(7,P,4,1,"mat-form-field",2),i.Wb(),i.Xb(8,"mat-card-content"),i.Xb(9,"div",3),i.Ic(10,q,18,3,"table",4),i.Wb(),i.Sb(11,"br"),i.Ic(12,H,1,0,"app-ellipis-loading",2),i.Sb(13,"br"),i.Wb(),i.Wb()),2&t&&(i.Db(7),i.sc("ngIf",0==e.isLoading),i.Db(3),i.sc("ngIf",0==e.isLoading||e.users),i.Db(2),i.sc("ngIf",e.isLoading))},directives:[h.a,b.j,m.a,m.e,s.l,m.d,u.b,d.a,a.b,a.k,a.n,h.b,u.f,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,b.h,I.f,I.h,f],pipes:[s.t,n.c,k.a],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t}(),T=r("7ZFx"),G=function(){function t(t,e,r){this.authService=t,this.modalService=e,this.p=r}return t.prototype.canActivate=function(t,e){var r=this.authService.user;return 0==this.authService.is_init?(this.authService.setRequestedUrl(e.url),this.authService.fetchUser()):0==r.is_administrator&&this.modalService.toast("Content not allowed for non-admin user","Access Denied","error"),r&&r.is_administrator},t.\u0275fac=function(e){return new(e||t)(i.fc(D.a),i.fc(l.a),i.fc(T.a))},t.\u0275prov=i.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Y=[{path:"",component:z},{path:"create",component:y,canActivate:[G]},{path:":id/edit",component:S,canActivate:[G]}],$=function(){function t(){}return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(e){return new(e||t)},imports:[[b.k.forChild(Y)],b.k]}),t}(),B=r("FpXt");r.d(e,"UsersModule",(function(){return E}));var E=function(){function t(){}return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(e){return new(e||t)},imports:[[s.c,$,B.a,n.b.forRoot()]]}),t}()}}]);